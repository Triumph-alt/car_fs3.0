C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                22/06/25  17:11:51  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE SEEKFREE_IPS200_SPI
OBJECT MODULE PLACED IN .\Out_File\SEEKFREE_IPS200_SPI.obj
COMPILER INVOKED BY: D:\keil5\C251\BIN\C251.EXE ..\..\Libraries\seekfree_peripheral\SEEKFREE_IPS200_SPI.c LARGE INTR2 FL
                    -OAT64 WARNINGLEVEL(3) OPTIMIZE(0,SPEED) BROWSE INCDIR(..\..\Libraries\libraries;..\..\Libraries\seekfree_libraries;..\..
                    -\Libraries\seekfree_peripheral;..\CODE;..\USER\inc;..\USER\src;..\..\Libraries\seekfree_components) DEBUG PRINT(.\Out_Fi
                    -le\SEEKFREE_IPS200_SPI.lst) OBJECT(.\Out_File\SEEKFREE_IPS200_SPI.obj) 

stmt  level    source

    1          /********************************************************************************************************
             -*************
    2           * COPYRIGHT NOTICE
    3           * Copyright (c) 2018,é€é£ç§‘æŠ€
    4           * All rights reserved.
    5           * æŠ€æœ¯è®¨è®ºQQç¾¤ï¼šä¸€ç¾¤ï¼š179029047(å·²æ»¡)  äºŒç¾¤ï¼š244861897(å·²æ»¡)  ä¸‰ç¾¤ï¼š824575535
    6           *
    7           * ä»¥ä¸‹æ‰€æœ‰å†…å®¹ç‰ˆæƒå‡å±é€é£ç§‘æŠ€æ‰€æœ‰ï¼Œæœªç»å…è®¸ä¸å¾—ç”¨äºå•†ä¸šç”¨é€”ï¼Œ
    8           * æ¬¢è¿å„ä½ä½¿ç”¨å¹¶ä¼ æ’­æœ¬ç¨‹åºï¼Œä¿®æ”¹å†…å®¹æ—¶å¿…é¡»ä¿ç•™é€é£ç§‘æŠ€çš„ç‰ˆæƒå£°æ˜ã€‚
    9           *
   10           * @file                IPS200_SPI
   11           * @company                     æˆéƒ½é€é£ç§‘æŠ€æœ‰é™å…¬å¸
   12           * @author              é€é£ç§‘æŠ€(QQ3184284598)
   13           * @version             æŸ¥çœ‹docå†…versionæ–‡ä»¶ ç‰ˆæœ¬è¯´æ˜
   14           * @Software            MDK FOR C251 V5.60
   15           * @Target core         STC32F12K
   16           * @Taobao              https://seekfree.taobao.com/
   17           * @date                2019-11-15
   18           * @note                
   19                                                  æ¥çº¿å®šä¹‰ï¼š
   20                                                  ------------------------------------ 
   21                                                  2.0å¯¸IPSæ¨¡å—ç®¡è„š       å•ç‰‡æœºç®¡è„š
   22                                                  SCL                     æŸ¥çœ‹SEEKFREE_IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_SCL               å®å®šä¹‰     ç¡¬ä»¶SPIå¼•è„
             -šä¸å¯éšæ„åˆ‡æ¢
   23                                                  SDA                     æŸ¥çœ‹SEEKFREE_IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_SDA               å®å®šä¹‰     ç¡¬ä»¶SPIå¼•è„
             -šä¸å¯éšæ„åˆ‡æ¢
   24                                                  RES                     æŸ¥çœ‹SEEKFREE_IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_RST_PIN å®å®šä¹‰    
   25                                                  DC                      æŸ¥çœ‹SEEKFREE_IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_DC_PIN    å®å®šä¹‰  
   26                                                  CS                      æŸ¥çœ‹SEEKFREE_IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_CS                å®å®šä¹‰     ç¡¬ä»¶SPIå¼•è„š
             -ä¸å¯éšæ„åˆ‡æ¢
   27                                                  BL                                      æŸ¥çœ‹SEEKFREE_IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_BL_PIN    å®å®šä¹‰
   28                                                  
   29                                                  ç”µæºå¼•è„š
   30                                                  VCC 3.3Vç”µæº
   31                                                  GND ç”µæºåœ°
   32                                                  æœ€å¤§åˆ†è¾¨ç‡320*240
   33                                                  ------------------------------------ 
   34           ********************************************************************************************************
             -************/
   35          
   36          
   37          #include "SEEKFREE_IPS200_SPI.h"
   38          #include "SEEKFREE_FONT.h"
   39          #include "SEEKFREE_FUNCTION.h"
   40          #include "zf_function.h"
   41          
   42          #pragma warning disable = 115
   43          #pragma warning disable = 186
   44          
   45          #include "zf_spi.h"
   46          #include "zf_delay.h"
   47          
   48          static uint16 ips200_pencolor = IPS200_DEFAULT_PENCOLOR;
   49          static uint16 ips200_bgcolor  = IPS200_DEFAULT_BGCOLOR;
   50          
   51          static ips200_type_enum         ips200_display_type = IPS200_TYPE_SPI;
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                22/06/25  17:11:51  PAGE 2   

   52          static ips200_dir_enum          ips200_display_dir  = IPS200_DEFAULT_DISPLAY_DIR;
   53          static ips200_font_size_enum    ips200_display_font = IPS200_DEFAULT_DISPLAY_FONT;
   54          
   55          static uint16 ips200_x_max = 240;
   56          static uint16 ips200_y_max = 320;
   57          
   58          //-------------------------------------------------------------------------------------------------------
             -------------
   59          // å‡½æ•°ç®€ä»‹     IPS200 SPI å†™ 8bit æ•°æ®
   60          // å‚æ•°è¯´æ˜     data            æ•°æ®
   61          // è¿”å›å‚æ•°     void
   62          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_8bit_data_spi(command);
   63          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨
   64          //-------------------------------------------------------------------------------------------------------
             -------------
   65          void ips200_write_8bit_data_spi(uint8 dat)    
   66          {
   67   1              spi_mosi(dat);
   68   1      
   69   1      }
   70          
   71          //-------------------------------------------------------------------------------------------------------
             -------------
   72          // å‡½æ•°ç®€ä»‹     IPS200 SPI å†™ 16bit æ•°æ®
   73          // å‚æ•°è¯´æ˜     data            æ•°æ®
   74          // è¿”å›å‚æ•°     void
   75          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_16bit_data_spi(dat);
   76          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨
   77          //-------------------------------------------------------------------------------------------------------
             -------------
   78          void ips200_write_16bit_data_spi(uint16 dat)   
   79          {
   80   1          uint8 dat1[2];
   81   1          dat1[0] = dat >> 8;
   82   1          dat1[1] = (uint8)dat;
   83   1              
   84   1              spi_mosi(dat1[0]);      //å†™å…¥æ•°æ®  é«˜ä½åœ¨å‰  ä½ä½åœ¨å
   85   1              spi_mosi(dat1[1]);
   86   1      }
   87          
   88          
   89          //-------------------------------------------------------------------------------------------------------
             -------------
   90          // å‡½æ•°ç®€ä»‹     IPS200 å†™å‘½ä»¤
   91          // å‚æ•°è¯´æ˜     command         å‘½ä»¤
   92          // è¿”å›å‚æ•°     void
   93          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_command(0x2a);
   94          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨ ç”¨æˆ·æ— éœ€å…³å¿ƒ
   95          //-------------------------------------------------------------------------------------------------------
             -------------
   96          static void ips200_write_command (const uint8 command)
   97          {
   98   1      
   99   1              IPS200_CS(1);
  100   1              IPS200_CS(0);
  101   1              IPS200_DC(0);
  102   1              ips200_write_8bit_data_spi(command);
  103   1              IPS200_DC(1);
  104   1              IPS200_CS(1);
  105   1              IPS200_CS(0);
  106   1      
  107   1      }
  108          
  109          //-------------------------------------------------------------------------------------------------------
             -------------
  110          // å‡½æ•°ç®€ä»‹     IPS200 å‘æ¶²æ™¶å±å†™ 8bit æ•°æ®
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                22/06/25  17:11:51  PAGE 3   

  111          // å‚æ•°è¯´æ˜     dat             æ•°æ®
  112          // è¿”å›å‚æ•°     void
  113          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_8bit_data(0x0C);
  114          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨ ç”¨æˆ·æ— éœ€å…³å¿ƒ
  115          //-------------------------------------------------------------------------------------------------------
             -------------
  116          static void ips200_write_8bit_data (const uint8 dat)
  117          {
  118   1              IPS200_CS(0);
  119   1          IPS200_DC(1);
  120   1              ips200_write_8bit_data_spi(dat);
  121   1              IPS200_CS(1);
  122   1      }
  123          
  124          //-------------------------------------------------------------------------------------------------------
             -------------
  125          // å‡½æ•°ç®€ä»‹     IPS200 å‘æ¶²æ™¶å±å†™ 16bit æ•°æ®
  126          // å‚æ•°è¯´æ˜     dat             æ•°æ®
  127          // è¿”å›å‚æ•°     void
  128          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_16bit_data(x1);
  129          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨ ç”¨æˆ·æ— éœ€å…³å¿ƒ
  130          //-------------------------------------------------------------------------------------------------------
             -------------
  131          static void ips200_write_16bit_data (const uint16 dat)
  132          {
  133   1              IPS200_CS(0);
  134   1          IPS200_DC(1);
  135   1              ips200_write_16bit_data_spi(dat);
  136   1              IPS200_CS(1);
  137   1      }
  138          
  139          //-------------------------------------------------------------------------------------------------------
             -------------
  140          // å‡½æ•°ç®€ä»‹     è®¾ç½®æ˜¾ç¤ºåŒºåŸŸ
  141          // å‚æ•°è¯´æ˜     x1              èµ·å§‹xè½´åæ ‡
  142          // å‚æ•°è¯´æ˜     y1              èµ·å§‹yè½´åæ ‡
  143          // å‚æ•°è¯´æ˜     x2              ç»“æŸxè½´åæ ‡
  144          // å‚æ•°è¯´æ˜     y2              ç»“æŸyè½´åæ ‡
  145          // è¿”å›å‚æ•°     void
  146          // ä½¿ç”¨ç¤ºä¾‹     ips200_set_region(0, 0, ips200_x_max - 1, ips200_y_max - 1);
  147          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨ ç”¨æˆ·æ— éœ€å…³å¿ƒ
  148          //-------------------------------------------------------------------------------------------------------
             -------------
  149          static void ips200_set_region (uint16 x1, uint16 y1, uint16 x2, uint16 y2)
  150          {
  151   1      
  152   1      
  153   1          ips200_write_command(0x2a);
  154   1          ips200_write_16bit_data(x1);
  155   1          ips200_write_16bit_data(x2);
  156   1          
  157   1          ips200_write_command(0x2b);
  158   1          ips200_write_16bit_data(y1);
  159   1          ips200_write_16bit_data(y2);
  160   1          
  161   1          ips200_write_command(0x2c);
  162   1      }
  163          
  164          
  165          //-------------------------------------------------------------------------------------------------------
             -------------
  166          // å‡½æ•°ç®€ä»‹     IPS200 æ¸…å±å‡½æ•°
  167          // å‚æ•°è¯´æ˜     void
  168          // è¿”å›å‚æ•°     void
  169          // ä½¿ç”¨ç¤ºä¾‹     ips200_clear();
  170          // å¤‡æ³¨ä¿¡æ¯     å°†å±å¹•æ¸…ç©ºæˆèƒŒæ™¯é¢œè‰²
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                22/06/25  17:11:51  PAGE 4   

  171          //-------------------------------------------------------------------------------------------------------
             -------------
  172          void ips200_clear (void)
  173          {
  174   1          uint16 i, j;
  175   1              IPS200_CS(0);
  176   1      
  177   1          ips200_set_region(0, 0, ips200_x_max - 1, ips200_y_max - 1);
  178   1          for(i = 0; i < ips200_x_max; i ++)
  179   1          {
  180   2              for (j = 0; j < ips200_y_max; j ++)
  181   2              {
  182   3                  ips200_write_16bit_data(ips200_bgcolor);                 
  183   3              }
  184   2          }
  185   1      
  186   1              IPS200_CS(1);
  187   1      
  188   1      }
  189          
  190          //-------------------------------------------------------------------------------------------------------
             -------------
  191          // å‡½æ•°ç®€ä»‹     IPS200 å±å¹•å¡«å……å‡½æ•°
  192          // å‚æ•°è¯´æ˜     color           é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ zf_common_font.h å†… rgb565_co
             -lor_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  193          // è¿”å›å‚æ•°     void
  194          // ä½¿ç”¨ç¤ºä¾‹     ips200_full(RGB565_BLACK);
  195          // å¤‡æ³¨ä¿¡æ¯     å°†å±å¹•å¡«å……æˆæŒ‡å®šé¢œè‰²
  196          //-------------------------------------------------------------------------------------------------------
             -------------
  197          void ips200_full (const uint16 color)
  198          {
  199   1          uint16 i, j;
  200   1      
  201   1              IPS200_CS(0);
  202   1      
  203   1          ips200_set_region(0, 0, ips200_x_max - 1, ips200_y_max - 1);
  204   1          for(i = 0; i < ips200_x_max; i ++)
  205   1          {
  206   2              for (j = 0; j < ips200_y_max; j ++)
  207   2              {
  208   3                  ips200_write_16bit_data(color);                 
  209   3              }
  210   2          }
  211   1      
  212   1              IPS200_CS(1);
  213   1      
  214   1      }
  215          
  216          //-------------------------------------------------------------------------------------------------------
             -------------
  217          // å‡½æ•°ç®€ä»‹     è®¾ç½®æ˜¾ç¤ºæ–¹å‘
  218          // å‚æ•°è¯´æ˜     dir             æ˜¾ç¤ºæ–¹å‘  å‚ç…§ zf_device_ips200.h å†… ips200_dir_enum æšä¸¾ä½“
             -å®šä¹‰
  219          // è¿”å›å‚æ•°     void
  220          // ä½¿ç”¨ç¤ºä¾‹     ips200_set_dir(IPS200_PORTAIT);
  221          // å¤‡æ³¨ä¿¡æ¯     è¿™ä¸ªå‡½æ•°åªæœ‰åœ¨åˆå§‹åŒ–å±å¹•ä¹‹å‰è°ƒç”¨æ‰ç”Ÿæ•ˆ
  222          //-------------------------------------------------------------------------------------------------------
             -------------
  223          void ips200_set_dir (ips200_dir_enum dir)
  224          {
  225   1          ips200_display_dir = dir;
  226   1          if(dir < 2)
  227   1          {
  228   2              ips200_x_max = 240;
  229   2              ips200_y_max = 320;
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                22/06/25  17:11:51  PAGE 5   

  230   2          }
  231   1          else
  232   1          {
  233   2              ips200_x_max = 320;
  234   2              ips200_y_max = 240;
  235   2          }
  236   1      }
  237          
  238          //-------------------------------------------------------------------------------------------------------
             -------------
  239          // å‡½æ•°ç®€ä»‹     è®¾ç½®æ˜¾ç¤ºå­—ä½“
  240          // å‚æ•°è¯´æ˜     dir             æ˜¾ç¤ºæ–¹å‘  å‚ç…§ zf_device_ips200.h å†… ips200_font_size_enum æš
             -ä¸¾ä½“å®šä¹‰
  241          // è¿”å›å‚æ•°     void
  242          // ä½¿ç”¨ç¤ºä¾‹     ips200_set_font(IPS200_8x16_FONT);
  243          // å¤‡æ³¨ä¿¡æ¯     å­—ä½“å¯ä»¥éšæ—¶è‡ªç”±è®¾ç½® è®¾ç½®åç”Ÿæ•ˆ åç»­æ˜¾ç¤ºå°±æ˜¯æ–°çš„å­—ä½“å¤§å°
  244          //-------------------------------------------------------------------------------------------------------
             -------------
  245          void ips200_set_font (ips200_font_size_enum font)
  246          {
  247   1          ips200_display_font = font;
  248   1      }
  249          
  250          //-------------------------------------------------------------------------------------------------------
             -------------
  251          // å‡½æ•°ç®€ä»‹     è®¾ç½®æ˜¾ç¤ºé¢œè‰²
  252          // å‚æ•°è¯´æ˜     pen             é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ zf_common_font.h å†… rgb565_co
             -lor_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  253          // å‚æ•°è¯´æ˜     bgcolor         é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ zf_common_font.h å†… rgb565_co
             -lor_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  254          // è¿”å›å‚æ•°     void
  255          // ä½¿ç”¨ç¤ºä¾‹     ips200_set_color(RGB565_RED, RGB565_GRAY);
  256          // å¤‡æ³¨ä¿¡æ¯     å­—ä½“é¢œè‰²å’ŒèƒŒæ™¯é¢œè‰²ä¹Ÿå¯ä»¥éšæ—¶è‡ªç”±è®¾ç½® è®¾ç½®åç”Ÿæ•ˆ
  257          //-------------------------------------------------------------------------------------------------------
             -------------
  258          void ips200_set_color (const uint16 pen, const uint16 bgcolor)
  259          {
  260   1          ips200_pencolor = pen;
  261   1          ips200_bgcolor = bgcolor;
  262   1      }
  263          
  264          //-------------------------------------------------------------------------------------------------------
             -------------
  265          // å‡½æ•°ç®€ä»‹     IPS200 ç”»ç‚¹
  266          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ [0, ips200_x_max-1]
  267          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ [0, ips200_y_max-1]
  268          // å‚æ•°è¯´æ˜     color           é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ zf_common_font.h å†… rgb565_co
             -lor_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  269          // è¿”å›å‚æ•°     void
  270          // ä½¿ç”¨ç¤ºä¾‹     ips200_draw_point(0, 0, RGB565_RED);            //åæ ‡0,0ç”»ä¸€ä¸ªçº¢è‰²çš„ç‚¹
  271          // å¤‡æ³¨ä¿¡æ¯
  272          //-------------------------------------------------------------------------------------------------------
             -------------
  273          void ips200_draw_point (uint16 x, uint16 y, const uint16 color)
  274          {
  275   1      
  276   1              IPS200_CS(0);
  277   1      
  278   1          ips200_set_region(x, y, x, y);
  279   1          ips200_write_16bit_data(color);
  280   1      
  281   1              IPS200_CS(1);
  282   1      
  283   1      }
  284          
  285          //-------------------------------------------------------------------------------------------------------
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                22/06/25  17:11:51  PAGE 6   

             -------------
  286          // å‡½æ•°ç®€ä»‹     IPS200 ç”»çº¿
  287          // å‚æ•°è¯´æ˜     x_start         åæ ‡xæ–¹å‘çš„èµ·ç‚¹ [0, ips200_x_max-1]
  288          // å‚æ•°è¯´æ˜     y_start         åæ ‡yæ–¹å‘çš„èµ·ç‚¹ [0, ips200_y_max-1]
  289          // å‚æ•°è¯´æ˜     x_end           åæ ‡xæ–¹å‘çš„ç»ˆç‚¹ [0, ips200_x_max-1]
  290          // å‚æ•°è¯´æ˜     y_end           åæ ‡yæ–¹å‘çš„ç»ˆç‚¹ [0, ips200_y_max-1]
  291          // å‚æ•°è¯´æ˜     color           é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ zf_common_font.h å†… rgb565_co
             -lor_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  292          // è¿”å›å‚æ•°     void
  293          // ä½¿ç”¨ç¤ºä¾‹     ips200_draw_line(0, 0, 10, 10, RGB565_RED);     // åæ ‡ 0,0 åˆ° 10,10 ç”»ä¸€æ¡çº¢è
             -‰²çš„çº¿
  294          // å¤‡æ³¨ä¿¡æ¯
  295          //-------------------------------------------------------------------------------------------------------
             -------------
  296          void ips200_draw_line (uint16 x_start, uint16 y_start, uint16 x_end, uint16 y_end, const uint16 color)
  297          {
  298   1          int16 dx,dy,sx,sy,err,e2;
  299   1              
  300   1      //    // å‚æ•°æ£€æŸ¥
  301   1      //    if (x_start >= ips200_x_max || y_start >= ips200_y_max || x_end >= ips200_x_max || y_end >= ips200_
             -y_max) return;
  302   1              
  303   1              // è®¡ç®—ç»å¯¹å·®å€¼å’Œæ­¥è¿›æ–¹å‘
  304   1              dx = (x_end > x_start) ? (x_end - x_start) : (x_start - x_end);
  305   1              dy = (y_end > y_start) ? (y_end - y_start) : (y_start - y_end);
  306   1              sx = (x_start < x_end) ? 1 : -1;
  307   1              sy = (y_start < y_end) ? 1 : -1;
  308   1              err = dx - dy;
  309   1      
  310   1          // ä¸»ç»˜åˆ¶å¾ªç¯
  311   1          while (1) 
  312   1              {
  313   2                      
  314   2              // ç»˜åˆ¶å½“å‰ç‚¹ï¼ˆç¡®ä¿åœ¨å±å¹•èŒƒå›´å†…ï¼‰
  315   2      //        if (x_start < ips200_x_max && y_start < ips200_y_max) 
  316   2                      {
  317   3                  ips200_draw_point(x_start, y_start, color);
  318   3              }
  319   2      
  320   2              // åˆ°è¾¾ç»ˆç‚¹æ—¶é€€å‡º
  321   2              if (x_start == x_end && y_start == y_end) break;
  322   2      
  323   2              // è¯¯å·®å†³ç­–
  324   2              e2 = 2 * err;
  325   2                      
  326   2              if (e2 > -dy) 
  327   2                      {  // Xè½´æ­¥è¿›æ¡ä»¶
  328   3                  err -= dy;
  329   3                  x_start += sx;
  330   3              }
  331   2                      
  332   2              if (e2 < dx) 
  333   2                      {   // Yè½´æ­¥è¿›æ¡ä»¶
  334   3                  err += dx;
  335   3                  y_start += sy;
  336   3              }
  337   2          }
  338   1      }
  339          
  340          //-------------------------------------------------------------------------------------------------------
             -------------
  341          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤ºå­—ç¬¦
  342          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  343          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  344          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å­—ç¬¦
  345          // è¿”å›å‚æ•°     void
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                22/06/25  17:11:51  PAGE 7   

  346          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_char(0, 0, 'x');                     // åæ ‡0,0å†™ä¸€ä¸ªå­—ç¬¦x
  347          // å¤‡æ³¨ä¿¡æ¯
  348          //-------------------------------------------------------------------------------------------------------
             -------------
  349          void ips200_show_char (uint16 x, uint16 y, const char dat)
  350          {
  351   1          uint8 i, j;
  352   1              uint8 temp_top;
  353   1              uint8 temp_bottom;
  354   1      
  355   1              IPS200_CS(0);
  356   1      
  357   1          switch(ips200_display_font)
  358   1          {
  359   2      
  360   2              case IPS200_8X16_FONT:
  361   2                  for(i = 0; i < 8; i ++)
  362   2                  {
  363   3                      ips200_set_region(x + i, y, x + i, y + 15);
  364   3                      // å‡ 32 å› ä¸ºæ˜¯å–æ¨¡æ˜¯ä»ç©ºæ ¼å¼€å§‹å–å¾— ç©ºæ ¼åœ¨ ascii ä¸­åºå·æ˜¯ 32
  365   3                      temp_top = ascii_font_8x16[dat - 32][i];
  366   3                      temp_bottom = ascii_font_8x16[dat - 32][i + 8];
  367   3                      for(j = 0; j < 8; j ++)
  368   3                      {
  369   4                          if(temp_top & 0x01)
  370   4                          {
  371   5                              ips200_write_16bit_data(ips200_pencolor);
  372   5                          }
  373   4                          else
  374   4                          {
  375   5                              ips200_write_16bit_data(ips200_bgcolor);
  376   5                          }
  377   4                          temp_top >>= 1;
  378   4                      }
  379   3                      for(j = 0; j < 8; j ++)
  380   3                      {
  381   4                          if(temp_bottom & 0x01)
  382   4                          {
  383   5                              ips200_write_16bit_data(ips200_pencolor);
  384   5                          }
  385   4                          else
  386   4                          {
  387   5                              ips200_write_16bit_data(ips200_bgcolor);
  388   5                          }
  389   4                          temp_bottom >>= 1;
  390   4                      }
  391   3                  }
  392   2                  break;
  393   2              case IPS200_16X16_FONT:
  394   2                  // æš‚ä¸æ”¯æŒ
  395   2                  break;
  396   2          }
  397   1      
  398   1              IPS200_CS(1);
  399   1      
  400   1      }
  401          
  402          //-------------------------------------------------------------------------------------------------------
             -------------
  403          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤ºå­—ç¬¦ä¸²
  404          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  405          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  406          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²
  407          // è¿”å›å‚æ•°     void
  408          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_string(0, 0, "seekfree");
  409          // å¤‡æ³¨ä¿¡æ¯
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                22/06/25  17:11:51  PAGE 8   

  410          //-------------------------------------------------------------------------------------------------------
             -------------
  411          void ips200_show_string (uint16 x, uint16 y, const char dat[])
  412          {
  413   1      
  414   1          uint16 j = 0;
  415   1          while(dat[j] != '\0')
  416   1          {
  417   2              switch(ips200_display_font)
  418   2              {
  419   3      
  420   3                  case IPS200_8X16_FONT:
  421   3                      ips200_show_char(x + 8 * j, y, dat[j]);
  422   3                      j ++;
  423   3                      break;
  424   3                  case IPS200_16X16_FONT:
  425   3                      // æš‚ä¸æ”¯æŒ
  426   3                      break;
  427   3              }
  428   2          }
  429   1      }
  430          
  431          //-------------------------------------------------------------------------------------------------------
             -------------
  432          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤º32ä½æœ‰ç¬¦å· (å»é™¤æ•´æ•°éƒ¨åˆ†æ— æ•ˆçš„0)
  433          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  434          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  435          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å˜é‡ æ•°æ®ç±»å‹ int32
  436          // å‚æ•°è¯´æ˜     num             éœ€è¦æ˜¾ç¤ºçš„ä½æ•° æœ€é«˜10ä½  ä¸åŒ…å«æ­£è´Ÿå·
  437          // è¿”å›å‚æ•°     void
  438          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_int(0, 0, x, 3);                    // x å¯ä»¥ä¸º int32 int16 int8 ç±»å
             -‹
  439          // å¤‡æ³¨ä¿¡æ¯     è´Ÿæ•°ä¼šæ˜¾ç¤ºä¸€ä¸ª â€˜-â€™å·   æ­£æ•°æ˜¾ç¤ºä¸€ä¸ªç©ºæ ¼
  440          //-------------------------------------------------------------------------------------------------------
             -------------
  441          void ips200_show_int (uint16 x, uint16 y, const int32 dat, uint8 num)
  442          {
  443   1      
  444   1      
  445   1          int32 dat_temp = dat;
  446   1          int32 offset = 1;
  447   1          char data_buffer[12];
  448   1      
  449   1          memset(data_buffer, 0, 12);
  450   1          memset(data_buffer, ' ', num+1);
  451   1      
  452   1          if(num < 10)
  453   1          {
  454   2              for(; num > 0; num --)
  455   2              {
  456   3                  offset *= 10;
  457   3              }
  458   2              dat_temp %= offset;
  459   2          }
  460   1          func_int_to_str(data_buffer, dat_temp);
  461   1          ips200_show_string(x, y, (const char *)&data_buffer);
  462   1      }
  463          
  464          //-------------------------------------------------------------------------------------------------------
             -------------
  465          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤º32ä½æ— ç¬¦å· (å»é™¤æ•´æ•°éƒ¨åˆ†æ— æ•ˆçš„0)
  466          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, IPS200_x_max-1]
  467          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, IPS200_y_max-1]
  468          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å˜é‡ æ•°æ®ç±»å‹ uint32
  469          // å‚æ•°è¯´æ˜     num             éœ€è¦æ˜¾ç¤ºçš„ä½æ•° æœ€é«˜10ä½  ä¸åŒ…å«æ­£è´Ÿå·
  470          // è¿”å›å‚æ•°     void
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                22/06/25  17:11:51  PAGE 9   

  471          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_uint(0, 0, x, 3);                   // x å¯ä»¥ä¸º uint32 uint16 uint8 ç±
             -»å‹
  472          // å¤‡æ³¨ä¿¡æ¯
  473          //-------------------------------------------------------------------------------------------------------
             -------------
  474          void ips200_show_uint (uint16 x, uint16 y, const uint32 dat, uint8 num)
  475          {
  476   1          uint32 dat_temp = dat;
  477   1          int32 offset = 1;
  478   1          char data_buffer[12];
  479   1          memset(data_buffer, 0, 12);
  480   1          memset(data_buffer, ' ', num);
  481   1      
  482   1          if(num < 10)
  483   1          {
  484   2              for(; num > 0; num --)
  485   2              {
  486   3                  offset *= 10;
  487   3              }
  488   2              dat_temp %= offset;
  489   2          }
  490   1          func_uint_to_str(data_buffer, dat_temp);
  491   1          ips200_show_string(x, y, (const char *)&data_buffer);
  492   1      }
  493          
  494          //-------------------------------------------------------------------------------------------------------
             -------------
  495          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤ºæµ®ç‚¹æ•°(å»é™¤æ•´æ•°éƒ¨åˆ†æ— æ•ˆçš„0)
  496          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  497          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  498          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å˜é‡ï¼Œæ•°æ®ç±»å‹floatæˆ–double
  499          // å‚æ•°è¯´æ˜     num             æ•´æ•°ä½æ˜¾ç¤ºé•¿åº¦   æœ€é«˜8ä½
  500          // å‚æ•°è¯´æ˜     pointnum        å°æ•°ä½æ˜¾ç¤ºé•¿åº¦   æœ€é«˜6ä½
  501          // è¿”å›å‚æ•°     void
  502          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_float(0, 0, x, 2, 3);               // æ˜¾ç¤ºæµ®ç‚¹æ•°   æ•´æ•°æ˜¾ç¤º2ä½
             -   å°æ•°æ˜¾ç¤ºä¸‰ä½
  503          // å¤‡æ³¨ä¿¡æ¯     ç‰¹åˆ«æ³¨æ„å½“å‘ç°å°æ•°éƒ¨åˆ†æ˜¾ç¤ºçš„å€¼ä¸ä½ å†™å…¥çš„å€¼ä¸ä¸€æ ·çš„æ—¶å€™ï¼Œ
  504          //              å¯èƒ½æ˜¯ç”±äºæµ®ç‚¹æ•°ç²¾åº¦ä¸¢å¤±é—®é¢˜å¯¼è‡´çš„ï¼Œè¿™å¹¶ä¸æ˜¯æ˜¾ç¤ºå‡½æ•°çš„é—®é¢˜ï¼
             -Œ
  505          //              æœ‰å…³é—®é¢˜çš„è¯¦æƒ…ï¼Œè¯·è‡ªè¡Œç™¾åº¦å­¦ä¹    æµ®ç‚¹æ•°ç²¾åº¦ä¸¢å¤±é—®é¢˜ã€‚
  506          //              è´Ÿæ•°ä¼šæ˜¾ç¤ºä¸€ä¸ª â€˜-â€™å·   æ­£æ•°æ˜¾ç¤ºä¸€ä¸ªç©ºæ ¼
  507          //-------------------------------------------------------------------------------------------------------
             -------------
  508          void ips200_show_float (uint16 x, uint16 y, const double dat, uint8 num, uint8 pointnum)
  509          {
  510   1      
  511   1          double dat_temp = dat;
  512   1          double offset = 1.0;
  513   1          char data_buffer[17];
  514   1          memset(data_buffer, 0, 17);
  515   1          memset(data_buffer, ' ', num+pointnum+2);
  516   1      
  517   1          if(num < 10)
  518   1          {
  519   2              for(; num > 0; num --)
  520   2              {
  521   3                  offset *= 10;
  522   3              }
  523   2              dat_temp = dat_temp - ((int32)dat_temp / (int32)offset) * offset;
  524   2          }
  525   1          func_double_to_str(data_buffer, dat_temp, pointnum);
  526   1          ips200_show_string(x, y, data_buffer);
  527   1      }
  528          
  529          
  530          
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                22/06/25  17:11:51  PAGE 10  

  531          
  532          //-------------------------------------------------------------------------------------------------------
             -------------
  533          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤ºæ³¢å½¢
  534          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  535          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  536          // å‚æ•°è¯´æ˜     *wave           æ³¢å½¢æ•°ç»„æŒ‡é’ˆ
  537          // å‚æ•°è¯´æ˜     width           æ³¢å½¢å®é™…å®½åº¦
  538          // å‚æ•°è¯´æ˜     value_max       æ³¢å½¢å®é™…æœ€å¤§å€¼
  539          // å‚æ•°è¯´æ˜     dis_width       æ³¢å½¢æ˜¾ç¤ºå®½åº¦ å‚æ•°èŒƒå›´ [0, ips200_x_max]
  540          // å‚æ•°è¯´æ˜     dis_value_max   æ³¢å½¢æ˜¾ç¤ºæœ€å¤§å€¼ å‚æ•°èŒƒå›´ [0, ips200_y_max]
  541          // è¿”å›å‚æ•°     void
  542          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_wave(0, 0, data, 128, 64, 64, 32);
  543          // å¤‡æ³¨ä¿¡æ¯
  544          //-------------------------------------------------------------------------------------------------------
             -------------
  545          void ips200_show_wave (uint16 x, uint16 y, const uint16 *wave, uint16 width, uint16 value_max, uint16 dis
             -_width, uint16 dis_value_max)
  546          {
  547   1      
  548   1          uint32 i = 0, j = 0;
  549   1          uint32 width_index = 0, value_max_index = 0;
  550   1      
  551   1      
  552   1              IPS200_CS(0);
  553   1      
  554   1          ips200_set_region(x, y, x + dis_width - 1, y + dis_value_max - 1);          // è®¾ç½®æ˜¾ç¤ºåŒºåŸŸ
  555   1          for(i = 0; i < dis_value_max; i ++)
  556   1          {
  557   2              for(j = 0; j < dis_width; j ++)
  558   2              {
  559   3                  ips200_write_16bit_data(ips200_bgcolor); 
  560   3              }
  561   2          }
  562   1      
  563   1              IPS200_CS(1);
  564   1      
  565   1      
  566   1          for(i = 0; i < dis_width; i ++)
  567   1          {
  568   2              width_index = i * width / dis_width;
  569   2              value_max_index = *(wave + width_index) * (dis_value_max - 1) / value_max;
  570   2              ips200_draw_point(i + x, (dis_value_max - 1) - value_max_index + y, ips200_pencolor);
  571   2          }
  572   1      }
  573          
  574          //-------------------------------------------------------------------------------------------------------
             -------------
  575          // å‡½æ•°ç®€ä»‹     æ±‰å­—æ˜¾ç¤º
  576          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  577          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  578          // å‚æ•°è¯´æ˜     size            å–æ¨¡çš„æ—¶å€™è®¾ç½®çš„æ±‰å­—å­—ä½“å¤§å° ä¹Ÿå°±æ˜¯ä¸€ä¸ªæ±‰å­—å ç”
             -¨çš„ç‚¹é˜µé•¿å®½ä¸ºå¤šå°‘ä¸ªç‚¹ å–æ¨¡çš„æ—¶å€™éœ€è¦é•¿å®½æ˜¯ä¸€æ ·çš„
  579          // å‚æ•°è¯´æ˜     *chinese_buffer éœ€è¦æ˜¾ç¤ºçš„æ±‰å­—æ•°ç»„
  580          // å‚æ•°è¯´æ˜     number          éœ€è¦æ˜¾ç¤ºå¤šå°‘ä½
  581          // å‚æ•°è¯´æ˜     color           é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ zf_common_font.h å†… rgb565_co
             -lor_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  582          // è¿”å›å‚æ•°     void
  583          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_chinese(0, 0, 16, chinese_test[0], 4, RGB565_RED);//æ˜¾ç¤ºfontæ–‡ä»¶é‡Œé
             -¢çš„ ç¤ºä¾‹
  584          // å¤‡æ³¨ä¿¡æ¯     ä½¿ç”¨PCtoLCD2002è½¯ä»¶å–æ¨¡           é˜´ç ã€é€è¡Œå¼ã€é¡ºå‘   16*16
  585          //-------------------------------------------------------------------------------------------------------
             -------------
  586          void ips200_show_chinese (uint16 x, uint16 y, uint8 size, const uint8 *chinese_buffer, uint8 number, cons
             -t uint16 color)
  587          {
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                22/06/25  17:11:51  PAGE 11  

  588   1      
  589   1      
  590   1          int32 i, j, k;
  591   1          uint8 temp, temp1, temp2;
  592   1          const uint8 *p_data;
  593   1          
  594   1          temp2 = size / 8;
  595   1          
  596   1      
  597   1              IPS200_CS(0);
  598   1      
  599   1          ips200_set_region(x, y, number * size - 1 + x, y + size - 1);
  600   1          
  601   1          for(i = 0; i < size; i ++)
  602   1          {
  603   2              temp1 = number;
  604   2              p_data = chinese_buffer + i * temp2;
  605   2              while(temp1 --)
  606   2              {
  607   3                  for(k = 0; k < temp2; k ++)
  608   3                  {
  609   4                      for(j = 8; j > 0; j --)
  610   4                      {
  611   5                          temp = (*p_data >> (j - 1)) & 0x01;
  612   5                          if(temp)
  613   5                          {
  614   6                              ips200_write_16bit_data(color);
  615   6                          }
  616   5                          else
  617   5                          {
  618   6                              ips200_write_16bit_data(ips200_bgcolor);
  619   6                          }
  620   5                      }
  621   4                      p_data ++;
  622   4                  }
  623   3                  p_data = p_data - temp2 + temp2 * size;
  624   3              }   
  625   2          }
  626   1      
  627   1              IPS200_CS(1);
  628   1      
  629   1      }
  630          
  631          //-------------------------------------------------------------------------------------------------------
             -------------
  632          // å‡½æ•°ç®€ä»‹     2å¯¸ IPSæ¶²æ™¶åˆå§‹åŒ–
  633          // å‚æ•°è¯´æ˜     type_select     ä¸¤å¯¸å±æ¥å£ç±»å‹ IPS200_TYPE_SPI ä¸º SPI æ¥å£ä¸²å£ä¸¤å¯¸å± I
             -PS200_TYPE_PARALLEL8 ä¸º 8080 åè®®å…«ä½å¹¶å£ä¸¤å¯¸å±
  634          // è¿”å›å‚æ•°     void
  635          // ä½¿ç”¨ç¤ºä¾‹     ips200_init(IPS200_TYPE_PARALLEL8);
  636          // å¤‡æ³¨ä¿¡æ¯
  637          //-------------------------------------------------------------------------------------------------------
             -------------
  638          void ips200_init_spi ()
  639          {
  640   1              IPS200_BL(1);
  641   1              IPS200_DC(0);
  642   1              IPS200_RST(0);
  643   1              
  644   1      
  645   1              spi_init(IPS200_SPIN_PIN, IPS200_SCL_PIN, IPS200_SDA_PIN, IPS200_SDA_IN_PIN, 0, MASTER, SPI_SYSclk_DIV_2
             -);
  646   1      
  647   1      
  648   1        
  649   1      
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                22/06/25  17:11:51  PAGE 12  

  650   1          ips200_set_dir(ips200_display_dir);
  651   1          ips200_set_color(ips200_pencolor, ips200_bgcolor);
  652   1      
  653   1          
  654   1          IPS200_BL(1);
  655   1          IPS200_RST(0);  
  656   1          delay_ms(5);
  657   1          IPS200_RST(1);      
  658   1          delay_ms(120);
  659   1          
  660   1      
  661   1              IPS200_CS(0);
  662   1      
  663   1          ips200_write_command(0x11);
  664   1          delay_ms(120);
  665   1      
  666   1          ips200_write_command(0x36);
  667   1          if(ips200_display_dir == 0)
  668   1          {
  669   2              ips200_write_8bit_data(0x00);
  670   2          }
  671   1          else if(ips200_display_dir == 1)
  672   1          {
  673   2              ips200_write_8bit_data(0xC0);
  674   2          }
  675   1          else if(ips200_display_dir == 2)
  676   1          {
  677   2              ips200_write_8bit_data(0x70);
  678   2          }
  679   1          else
  680   1          {
  681   2              ips200_write_8bit_data(0xA0);
  682   2          }
  683   1      
  684   1          ips200_write_command(0x3A);            
  685   1          ips200_write_8bit_data(0x05);
  686   1          
  687   1          ips200_write_command(0xB2);            
  688   1          ips200_write_8bit_data(0x0C);
  689   1          ips200_write_8bit_data(0x0C); 
  690   1          ips200_write_8bit_data(0x00); 
  691   1          ips200_write_8bit_data(0x33); 
  692   1          ips200_write_8bit_data(0x33);           
  693   1      
  694   1          ips200_write_command(0xB7);            
  695   1          ips200_write_8bit_data(0x35);
  696   1      
  697   1          ips200_write_command(0xBB);            
  698   1          ips200_write_8bit_data(0x29);                                               // 32 Vcom=1.35V
  699   1                                                                  
  700   1          ips200_write_command(0xC2);            
  701   1          ips200_write_8bit_data(0x01);
  702   1      
  703   1          ips200_write_command(0xC3);            
  704   1          ips200_write_8bit_data(0x19);                                               // GVDD=4.8V 
  705   1                                                                  
  706   1          ips200_write_command(0xC4);            
  707   1          ips200_write_8bit_data(0x20);                                               // VDV, 0x20:0v
  708   1      
  709   1          ips200_write_command(0xC5);            
  710   1          ips200_write_8bit_data(0x1A);                                               // VCOM Offset Set
  711   1      
  712   1          ips200_write_command(0xC6);            
  713   1          ips200_write_8bit_data(0x01F);                                              // 0x0F:60Hz          
  714   1      
  715   1          ips200_write_command(0xD0);            
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                22/06/25  17:11:51  PAGE 13  

  716   1          ips200_write_8bit_data(0xA4);
  717   1          ips200_write_8bit_data(0xA1);                                                                        
             -                                                                                                                   
  718   1                      
  719   1          ips200_write_command(0xE0);     
  720   1          ips200_write_8bit_data(0xD0);   
  721   1          ips200_write_8bit_data(0x08);   
  722   1          ips200_write_8bit_data(0x0E);   
  723   1          ips200_write_8bit_data(0x09);   
  724   1          ips200_write_8bit_data(0x09);   
  725   1          ips200_write_8bit_data(0x05);   
  726   1          ips200_write_8bit_data(0x31);   
  727   1          ips200_write_8bit_data(0x33);   
  728   1          ips200_write_8bit_data(0x48);   
  729   1          ips200_write_8bit_data(0x17);   
  730   1          ips200_write_8bit_data(0x14);   
  731   1          ips200_write_8bit_data(0x15);   
  732   1          ips200_write_8bit_data(0x31);   
  733   1          ips200_write_8bit_data(0x34);   
  734   1      
  735   1          ips200_write_command(0xE1);     
  736   1          ips200_write_8bit_data(0xD0);   
  737   1          ips200_write_8bit_data(0x08);   
  738   1          ips200_write_8bit_data(0x0E);   
  739   1          ips200_write_8bit_data(0x09);   
  740   1          ips200_write_8bit_data(0x09); 
  741   1          ips200_write_8bit_data(0x15);   
  742   1          ips200_write_8bit_data(0x31);   
  743   1          ips200_write_8bit_data(0x33);   
  744   1          ips200_write_8bit_data(0x48);   
  745   1          ips200_write_8bit_data(0x17);   
  746   1          ips200_write_8bit_data(0x14);   
  747   1          ips200_write_8bit_data(0x15);   
  748   1          ips200_write_8bit_data(0x31);   
  749   1          ips200_write_8bit_data(0x34);   
  750   1      
  751   1          ips200_write_command(0x21);
  752   1          
  753   1          ips200_write_command(0x29);
  754   1      
  755   1              IPS200_CS(1);
  756   1      
  757   1      
  758   1          ips200_clear();                                                             // åˆå§‹åŒ–ä¸ºç™½å±
  759   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =      3856     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =       264     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        49     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
